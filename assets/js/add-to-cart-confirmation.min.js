document.addEventListener("DOMContentLoaded",function(){function t(t){t.classList.remove("active"),document.body.classList.remove("modal-open")}const e=document.querySelector(".single_add_to_cart_button"),n=document.querySelector("#add-to-cart-confirmation-modal");e.addEventListener("click",function(t){t.target.classList.contains("disabled")||(this.hasAttribute("data-confirmed")?this.removeAttribute("data-confirmed"):(t.preventDefault(),n&&c(n,this)))});const c=(n,c)=>{n.classList.add("active"),document.body.classList.add("modal-open");const o=n.querySelector(".btn-cancel"),a=n.querySelector(".btn-confirm");o.addEventListener("click",function(){t(n)}),a.addEventListener("click",function(o){o.stopPropagation(),handleLoading(o,!0),action=this.getAttribute("data-action"),action&&kmAjaxCall(action,{confirm:!0}).then(o=>{o.success&&(c.setAttribute("data-confirmed","true"),e.hasAttribute("data-confirmed")&&e.click()),t(n)}).catch(t=>{console.log(t)})})}});