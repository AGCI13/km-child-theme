document.addEventListener("DOMContentLoaded",function(){function e(){const e=document.querySelectorAll(".km-user-note-modal");e.forEach(function(e){e.remove()})}const t=document.querySelectorAll(".km-note-preview");t.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),e();const r=t.getAttribute("data-user-note"),s=t.getAttribute("data-user-id"),o=document.createElement("div");o.classList.add("km-user-note-modal"),o.style.position="fixed",o.style.left="50%",o.style.top="50%",o.style.transform="translate(-50%, -50%)",o.style.backgroundColor="#fff",o.style.border="1px solid #f4f4f4",o.style.padding="20px",o.style.zIndex="1000",o.innerHTML=`<a href="/wp-admin/user-edit.php?user_id=${s}#user-note-table">Ã‰diter</a><button style="float: right;" onclick="this.parentElement.style.display='none'">Fermer</button><p>${r}</p>`,document.body.appendChild(o)})})}),jQuery(document).ready(function(e){function t(){const t=document.querySelectorAll(".km-success-message, .km-error-message"),n=document.querySelectorAll(".km-loading-message");t.forEach(function(t){e(t).fadeOut()}),n.forEach(function(e){e.remove()})}function n(){setTimeout(t,2500)}const r=document.querySelector('[data-key="field_6536a052fb38f"]'),s=r.querySelector(".acf-input select");s&&e(s).on("select2:select",function(e){const s=new URLSearchParams(window.location.search),o=s.get("post"),a=this.value;t(),r.insertAdjacentHTML("beforeend",'<p class="km-loading-message">Chargement...</p>'),kmAjaxCall("save_transporter",{transporteur:a,post_id:o}).then(e=>{t(),e.success?r.insertAdjacentHTML("beforeend",'<p class="km-success-message">'+e.data+"</p>"):r.insertAdjacentHTML("beforeend",'<p class="km-error-message">Une erreur est survenue: '+error+"</p>"),n()}).catch(e=>{t(),r.insertAdjacentHTML("beforeend",'<p class="km-error-message">Une erreur est survenue: '+e+"</p>"),n()})})});